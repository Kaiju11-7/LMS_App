import{r as v,v as B,c as b,b as d,u as a,w as c,F as S,o as x,X as D,d as e,D as M,e as r,f,g as p,t as n,j as _,h as j,i as C}from"./app-f5957278.js";import{_ as q}from"./AuthenticatedLayout-fa00232b.js";import{M as N}from"./ModalForm-4937605e.js";import{i as $}from"./theme-sugar-6f02a382.js";import"./lms_logo-1-f2b4f13d.js";import"./_plugin-vue_export-helper-c27b6911.js";const F=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Book Details ",-1),O={class:"container px-6 py-10 mx-auto max-w-screen-xl"},V={class:"flex mb-4","aria-label":"Breadcrumb"},I={class:"inline-flex items-center space-x-1 md:space-x-3"},E={class:"inline-flex items-center cursor-pointer"},T=e("li",{"aria-current":"page"},[e("div",{class:"flex items-center"},[e("svg",{"aria-hidden":"true",class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})]),e("span",{class:"ml-1 text-sm font-medium text-gray-500 md:ml-2 dark:text-gray-400"}," Book Details ")])],-1),A={class:"grid grid-cols-1 sm:grid-cols-3 gap-5 justify-start bg-white p-4 shadow rounded-md"},z={class:"relative"},L={class:"bg-sky-100 py-1 px-2 absolute text-blue-500"},P=["src"],Q={class:"flex flex-col justify-center"},R={class:"text-blue-500 font-normal"},U={class:"text-3xl font-semibold text-gray-800 dark:text-white"},W={class:"text-gray-500 mb-2"},X={class:"text-gray-700 mb-4"},G={class:"flex justify-center flex-col mb-4"},H={class:"text-xl font-bold mr-2"},J={class:"font-normal text-lg"},K={class:"text-xl font-bold mr-2"},Y={class:"font-normal text-lg"},Z={key:0,class:"text-lg font-bold mr-2"},ee=e("span",{class:"text-sm font-normal bg-green-400 py-1 px-3 rounded-lg text-white"},"Available",-1),te={key:1,class:"text-lg font-bold mr-2"},oe=e("span",{class:"text-sm font-normal bg-red-400 py-1 px-3 rounded-lg text-white"},"Inactive",-1),se=["onSubmit"],ae={class:"mb-4 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},le={class:"mb-3"},ne=e("label",{for:"to_return",class:"block text-gray-500 text-sm font-bold mb-2"},"When do you want to return the book?",-1),re=["min","max"],ie={class:"bg-gray-100 px-4 py-2 sm:px-6 sm:flex sm:flex-row-reverse"},de={class:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto flex flex-row gap-2"},ce=["disabled"],ge={__name:"Book-details",props:{book:Object,is_requested:Object},setup(o){const u=$.useToast(),w=v("/uploads/"),m=new Date,h=new Date(m);h.setDate(m.getDate()+30);const y=m.toISOString().slice(0,10),k=h.toISOString().slice(0,10),t=B({showModal:null,user_id:null,book_id:null,status:null,to_return:null}),g=(i,s)=>{t.status=2,t.user_id=i,t.book_id=s,t.post(route("book.borrow"),{preserveScroll:!0,onSuccess:l=>{l.props.flash.message=="202"?(t.reset(),t.showModal=null,u.success("Borrowed book successfully",{duration:2e3})):l.props.flash.message=="400"&&(t.reset(),t.showModal=null,u.error("Failed to request book",{duration:2e3}))},onError:()=>{u.success("Please try again!",{duration:2e3})}})};return(i,s)=>(x(),b(S,null,[d(a(D),{title:"Book Details"}),d(q,null,{header:c(()=>[F]),default:c(()=>[e("div",O,[e("nav",V,[e("ol",I,[e("li",E,[d(a(M),{href:i.route("books"),class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},{default:c(()=>[r(" Browse Books ")]),_:1},8,["href"])]),T])]),e("div",A,[e("div",z,[f(e("span",L,"Already requested",512),[[p,o.is_requested]]),e("img",{class:"rounded-lg shadow w-full",src:w.value+o.book.book_img},null,8,P)]),e("div",Q,[e("span",R,n(o.book.category_name),1),e("h2",U,n(o.book.book_name),1),e("p",W,n(o.book.author_name),1),e("p",X,n(o.book.description),1),e("div",G,[e("p",H,[r(" Fee: "),e("span",J,"â‚±"+n(o.book.book_fees)+".00",1)]),e("p",K,[r(" Qty: "),e("span",Y,n(o.book.quantity)+" Copies",1)]),o.book.is_active==1?(x(),b("p",Z,[r(" Status: "),ee])):_("",!0),o.book.is_active==0?(x(),b("p",te,[r(" Status: "),oe])):_("",!0)]),e("div",null,[e("button",{class:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-5 rounded",onClick:s[0]||(s[0]=l=>a(t).showModal=o.book.id)}," Borrow Now "),f(d(N,null,{default:c(()=>[e("form",{onSubmit:j(g,["prevent"])},[e("div",ae,[e("div",le,[ne,f(e("input",{type:"date",min:a(y),max:a(k),class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline","onUpdate:modelValue":s[1]||(s[1]=l=>a(t).to_return=l),id:"to_return",placeholder:"Name of the book"},null,8,re),[[C,a(t).to_return]])])]),e("div",ie,[e("span",de,[e("button",{type:"submit",disabled:a(t).processing,onClick:s[2]||(s[2]=l=>g(i.$page.props.auth.user.id,o.book.id)),class:"inline-flex justify-center w-full rounded-md border border-transparent px-8 py-2 bg-blue-500 text-base leading-6 font-medium text-white shadow-sm hover:bg-blue-600 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Save ",8,ce),e("span",{onClick:s[3]||(s[3]=l=>a(t).showModal=null),class:"cursor-pointer inline-flex justify-center w-full rounded-md border border-transparent px-8 py-2 bg-gray-500 text-base leading-6 font-medium text-white shadow-sm hover:bg-gray-600 focus:outline-none focus:border-gray-700 focus:shadow-outline-gray transition ease-in-out duration-150 sm:text-sm sm:leading-5"}," Close ")])])],40,se)]),_:1},512),[[p,a(t).showModal]])])])])])]),_:1})],64))}};export{ge as default};
